service: headless-chrome-test

custom:
  bucket_name: milinote-web/scrap-thumb

provider:
  name: aws
  runtime: nodejs6.10
  stage: dev
  region: ap-northeast-2
  environment:
    CHROME_PATH: ./headless_shell
  deploymentBucket:
    name: com.milinote.ap-northeast-2.dev.deploys # Deployment bucket name. Default is generated by the framework
    serverSideEncryption: AES256 # when using server-side encryption
  iamRoleStatements:
    - Effect: "Allow"
      Action:
        - "s3:Put*"
        - "s3:GetObject"
      Resource:
        - "arn:aws:s3:::${self:custom.bucket_name}"
        - "arn:aws:s3:::${self:custom.bucket_name}/*"
        
functions:
  headless_chrome_test:
    handler: index.handler
    name: headless-chrome-test
    timeout: 10
    memorySize: 3008
    events:
      - http:
          path: headless-chrome-test/web_screenshot
          method: get
          integration: lambda
